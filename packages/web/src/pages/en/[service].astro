---
import ServiceLayout from "@layouts/ServiceLayout.astro";
import { allServices } from "@lib/api";
import { mapServices, getServices } from "@lib/utils";

const url = new URL(Astro.request.url);
const permalink = url.href;

export async function getStaticPaths() {
	const lang = "en";
	const services = await getServices(lang, allServices);

	return services.flatMap(mapServices(lang));
}

const { lang, title, description, content, kainos_prierasas, price } = Astro.props;
---

<ServiceLayout
	{lang}
	{title}
	{description}
	{content}
	{price}
	{kainos_prierasas}
	{permalink}
/>
